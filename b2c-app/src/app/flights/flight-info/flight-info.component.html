<div class="flight_info flight_card">
  <div class="col-lg-12 col-12 flight_info" *ngIf="itinerary_info">
    <div
      class="m-0 flight_row"
      *ngFor="let odoList of itinerary_info.odoList; let idx = index; let last = last; let first = first"
      [ngClass]="!last ? 'bor_btm' : ''"
      (click)="toggleDiv(itinerary_info, itinerary_info.id)"
    >
      <div class="segMents_route px-3 mb-2">
        <span>
          <img ImageSrc src="../../../assets/icons/srp_Icons/flight_dpt.svg" alt="flight_dpt" loading="lazy" />
        </span>
        <span *ngIf="flightsearchInfo.tripType != 'multi'">
          <span class="dept_seg" *ngIf="idx === 0">
            <span class="way_def">DEPARTURE</span>
            <span class="trip_date">{{
              itinerary_info.odoList[idx].segments[0].departureDateTime | date: 'd MMM yy'
            }}</span>
          </span>

          <span class="dept_seg" *ngIf="itinerary_info.odoList.length == 2 && idx === 1">
            <span class="way_def">RETURN</span>
            <span class="trip_date">{{
              itinerary_info.odoList[idx].segments[0].departureDateTime | date: 'd MMM yy'
            }}</span>
          </span>
        </span>

        <span class="dept_seg" *ngIf="itinerary_info.odoList.length > 1 && flightsearchInfo?.tripType == 'multi'">
          <span class="way_def">TRIP {{ idx + 1 }}</span>
          <span class="trip_date">{{
            itinerary_info.odoList[idx].segments[0].departureDateTime | date: 'd MMM yy'
          }}</span>
        </span>
      </div>

      <div class="row mb-2" *ngFor="let segments of odoList.segments; let index = index; let last = last">
        <div class="d-lg-flex align-items-center col-lg-3 col-sm-12 pl-lg-4 mb-2 mb-lg-0">
          <span class="airl_logo">
            <img
              class="carrier_logo airLineXs"
              ImageSrc
              src="assets/img/carriers/retina48px/carrier-{{ segments.airlineCode }}.png"
              alt="{{ segments.airlineCode }}"
              loading="lazy"
            />
          </span>
          <span class="air_info clearfix">
            <span class="airl_name">
              {{ getAirlinename(flightsList.airlineNames[segments.airlineCode]) }}
            </span>
            <span class="airl_numb"> ({{ segments.flightNumber }}) </span>

            <div *ngIf="segments.opAirlineCode">
              <div class="mweb opAirline">Operated by {{ flightsList.airlineNames[segments.opAirlineCode] }}</div>
            </div>
            <span
              class="baggage d-none d-lg-block"
              *ngIf="
                getBaggage(odoList.segments[0].ID, 'checked').length != 0 ||
                getBaggage(odoList.segments[0].ID, 'hand').length != 0
              "
            >
              <span class="baggage hglt" *ngIf="getBaggage(odoList.segments[0].ID, 'hand')">
                <img
                  ImageSrc
                  class="bag_icon"
                  src="./../../../assets/icons/srp_Icons/new_hand_baggage.svg"
                  alt="hand"
                  loading="lazy"
                />{{ getBaggage(odoList.segments[0].ID, 'hand') }}
              </span>
              <span *ngIf="getBaggage(odoList.segments[0].ID, 'checked').length != 0">
                <span *ngIf="getBaggage(odoList.segments[0].ID, 'checked') == 'No baggage allowance'" class="noBaggage_Bg">
                  <img
                    ImageSrc
                    class="bag_icon ml-1"
                    src="./../../../assets/icons/srp_Icons/new_no_baggage.svg"
                    alt="no bag"
                    loading="lazy"
                  />

                  <span translate class="no_baggage_txt">No Baggage</span>
                </span>
                <span class="hglt" *ngIf="getBaggage(odoList.segments[0].ID, 'checked') != 'No baggage allowance'">
                  <img
                    ImageSrc
                    class="bag_icon ml-1"
                    src="./../../../assets/icons/srp_Icons/new_checked_baggage.svg"
                    alt="hand"
                    loading="lazy"
                  /><span>{{ getBaggage(odoList.segments[0].ID, 'checked') }} </span>
                </span>
              </span>
            </span>
          </span>
        </div>
        <div class="col-12 col-lg-9">
          <div class="row">
            <div class="col-lg-4 col-4 pl-lg-0 text-center">
              <div class="airp_name">{{ segments.departureDateTime | date: 'd MMM yy' }}</div>
              <div class="time">
                {{ segments.departureDateTime | date: 'HH:mm' }}
              </div>
              <div class="airp_name">
                {{ getAirportName(segments.origCode) }}
              </div>
            </div>

            <div class="text-center p-0 px-lg-3 col-lg-3 col-4 pt-2">
              <div class="flight_data">
                <div class="dur">
                  {{ getTimeInHours(segments.duration) }}
                </div>
                <div class="stops-container">
                  <div class="line-with-dots">
                    <div class="line"></div>
                  </div>
                </div>

                <div class="stops" translate>
                  <span class="cabinClass d-lg-inline">{{ segments.cabinClass | lowercase }}</span>
                </div>

                <div class="techStops" *ngIf="segments?.technicalStops && getTechStops(segments)">
                  <div class="tech_stps_txt mt-1">
                    {{ getTechStops(segments) }}
                  </div>
                </div>
              </div>
            </div>

            <div class="pl-lg-3 col-lg-4 col-4 pl-4 text-center">
              <div class="airp_name">{{ segments.arrivalDateTime | date: 'd MMM yy' }}</div>
              <div class="time">
                {{ segments.arrivalDateTime | date: 'HH:mm' }}
              </div>
              <div class="airp_name">
                {{ getAirportName(segments.destCode) }}
              </div>
            </div>
          </div>
        </div>

        <div class="extras mt-1 offset-0 offset-lg-3 pl-lg-0 col-12 col-lg-9">
          <span
            class="baggage d-block d-lg-none"
            *ngIf="
              getBaggage(odoList.segments[0].ID, 'checked').length != 0 ||
              getBaggage(odoList.segments[0].ID, 'hand').length != 0
            "
          >
            <span class="baggage hglt" *ngIf="getBaggage(odoList.segments[0].ID, 'hand')">
              <img
                ImageSrc
                class="bag_icon"
                src="./../../../assets/icons/srp_Icons/new_hand_baggage.svg"
                alt="hand"
                loading="lazy"
              />{{ getBaggage(odoList.segments[0].ID, 'hand') }}
            </span>
            <span *ngIf="getBaggage(odoList.segments[0].ID, 'checked').length != 0">
              <span *ngIf="getBaggage(odoList.segments[0].ID, 'checked') == 'No baggage allowance'" class="noBaggage_Bg">
                <img
                  ImageSrc
                  class="bag_icon ml-1"
                  src="./../../../assets/icons/srp_Icons/new_no_baggage.svg"
                  alt="no bag"
                  loading="lazy"
                />
                <span translate class="no_baggage_txt">No Baggage</span>
              </span>
              <span class="hglt" *ngIf="getBaggage(odoList.segments[0].ID, 'checked') != 'No baggage allowance'" >
                <img
                  ImageSrc
                  class="bag_icon ml-1"
                  src="./../../../assets/icons/srp_Icons/new_checked_baggage.svg"
                  alt="hand"
                  loading="lazy"
                /><span>{{ getBaggage(odoList.segments[0].ID, 'checked') }} </span>
              </span>
            </span>
          </span>
          <div class="clearfix"></div>
          <div
            class="offset-0 offset-lg-3 col-12 layover_section text-center"
            *ngIf="odoList.segments.length > 1 && !last"
          >
            <div class="layover">
              <span>
                <img ImageSrc src="./../../../assets/icons/flight_dt_layover.svg" alt="layover" loading="lazy" />
                <span class="lap_txt">{{ getLayoverTxt(odoList)[index] }}</span>
                {{ getLayoverTime(odoList)[index] }}
              </span>
            </div>
          </div>
        </div>
      </div>

      <span
        class="float-right pb-4 mb-2"
        (click)="toggleDiv(itinerary_info, itinerary_info.id)"
        data-toggle="collapse"
        *ngIf="(itinerary_info.odoList.length === 2 && first) || (itinerary_info.odoList.length !== 2 && last)"
      >
        <a class="flight_details_link" rel="nofollow" translate>
          <span class=""
            ><img ImageSrc src="../../../assets/icons/v1-icons/down-arrow.svg" alt="down-arrow" loading="lazy"
          /></span>
          Hide Flight Details
        </a>
      </span>
    </div>
  </div>
</div>
